#!/usr/bin/env bash

# Directory
hypr_dir="$HOME/.config/hypr/themes"
rofi_dir="$HOME/.config/rofi/colors"
kitty_dir="$HOME/.config/kitty"
waybar_dir="$HOME/.config/waybar"
nvim_settings="$HOME/.config/nvim/lua/settings.lua"

# prompt="dmenu -l 9 "
prompt="rofi -dmenu -theme ~/.config/rofi/launchers/type-1/style-3.rasi"

# Theme
cancel="窱 Cancel"
theme1=" Nord"
theme2=" Everforest"
theme3=" Dracula"
theme4=" Catppuccin (Macchiato)"
theme5=" Gruvbox"
theme6=" Srcery"
theme7=" Cozy-Night"

# Variable to pass to dmenu or rofi
option="$cancel\n$theme1\n$theme2\n$theme3\n$theme4\n$theme5\n$theme6\n$theme7"


change_theme()
{
	cp ${hypr_dir}/$1.conf ${hypr_dir}/color.conf
	cp ${rofi_dir}/$1.rasi ${rofi_dir}/colors.rasi
	cp ${kitty_dir}/colorscheme/$1.conf ${kitty_dir}/color.conf
	cp ${waybar_dir}/all.css ${waybar_dir}/style.css
	sed -i "s/\(colorscheme \)\(.*\)/\1$1]]/" $nvim_settings
if [[ "$1" == "cozy-night" ]]; then
	# nvim
	sed -i 's/\(colorscheme \)\(.*\)/\1tokyonight-night]]/' $nvim_settings

elif [[ "$1" == "catppuccin_macchiato" ]]; then
	# nvim
	sed -i 's/\(colorscheme \)\(.*\)/\1catppuccin]]/' $nvim_settings

elif [[ "$1" == "everforest" ]]; then
	#waybar
		cp ${waybar_dir}/everforest.css ${waybar_dir}/style.css
	fi

	hyprctl reload # restart hyprland
}



change_gtk_theme() 
{
   sed -e "s/^gtk-theme-name=.*/gtk-theme-name="$@"/" -i $HOME/.config/gtk-3.0/settings.ini
   sed -e "s/^gtk-theme-name=.*/gtk-theme-name=\""$@"\"/" -i $HOME/.gtkrc-2.0 
}

select="$(echo -e "$option" | $prompt -p "Choose a theme: " )"
case $select in
	$theme1)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/minimal/ign_chomusuke.png &
		change_theme nord
		change_gtk_theme Nordic
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme2)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/detail/leaves-2.jpg &
		change_theme everforest
		change_gtk_theme everforest
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme3)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/distro/archdracula.png &
		change_theme dracula
		change_gtk_theme Dracula
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme4)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/abstract/cat-waves.png &
		change_theme catppuccin_macchiato
		change_gtk_theme Catppuccin-Macchiato-Standard-Red-Dark
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme5)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/paisages/mountain.jpeg &
		change_theme gruvbox
		change_gtk_theme Gruvbox-Material-Dark
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme6)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/detail/bush.jpg &
		change_theme srcery
		change_gtk_theme oomox-srcery
		$HOME/scripts/gtk2gsetting.sh
		;;
	$theme7)
		pkill -kill swaybg
		swaybg -m fill -i $HOME/.config/wallpaper/abstract/dark-cat.png &
		change_theme cozy-night
		change_gtk_theme TokyoNight
		$HOME/scripts/gtk2gsetting.sh
		;;
	esac
